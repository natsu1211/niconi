<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta http-equiv="X-UA-Compatible" value="IE=9">
		<link rel="stylesheet" href="css/base.css" />
		<link rel="stylesheet" href="css/colpick.css" />
		<title>Niconi Player</title>
		<script src="js/jquery.min.js"></script>
        <script src="js/nico.js"></script>
		<script src="js/CommentCoreLibrary.min.js"></script>
		<script src="js/ABPMobile.js"></script>
		<script src="js/ABPLibxml.js"></script>
		<script src="js/ABPlayer.js"></script>
		<script src="js/ColPick.js"></script>
        <script type="text/javascript" charset="utf-8">
            function getUrl(){
                var id = document.getElementById("video-id").value
                var API_URL = "http://flapi.nicovideo.jp/api/getflv/";
                req = new XMLHttpRequest();
                req.open("GET", API_URL + id, true);
                req.withCredentials = true;
                req.send(null);
                var response_data = req.responseText;
                alert(response_data);
                return response_data;
                
            }
        </script>
		<script type="text/javascript">
			window.addEventListener("load",function(){
				var inst = ABP.create(document.getElementById("player1"), {
					src: {
						playlist: [{
							video: document.getElementById("video-1"),
							comments: "comment-science.xml"
						}]
					},
					width: 960,
					height: 500,
					mobile: isMobile()
				});
				window.abpinst = inst;
			});
		</script>
	</head>
	<body>
        <section class="page-header">
            <h1 class="project-name">Niconi Player</h1>
            <h2 class="project-tagline">A niconico danmaku player</h2>
        </section>
        <form>
            Nico Video IDï¼š
            <input id="video-id" type="text" name="input" >
        </form>
        <div>
            <input type="button" name="input-button" value="Confirm" onclick="getUrl()">
        </div> 
        <br/>
		<div id="player1">
			<video id="video-1" autobuffer="true" data-setup="{}">
				<source src="http://7xl73j.dl1.z0.glb.clouddn.com/ccltestingvideos/outer_science.mp4" type="video/mp4">
				<source src="http://static.cdn.moe/ccltestingvideos/outer_science.webm" type="video/webm">
				<p>Your browser does not support html5 video!</p>
			</video>
		</div>
	</body>
</html>
